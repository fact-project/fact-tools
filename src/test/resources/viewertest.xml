<container>

<property name="path " value="sample.fits.gz" />
	<stream id="fact" class="fact.io.FitsStream" 
 		    url="${input}"  />
		<process input="fact">
			<fact.filter.DrsCalibration url="${drsInput}" outputKey="DataCalibrated"/>
            <fact.filter.ExponentialSmoothing key="DataCalibrated" outputKey="smoothedData1" alpha="0.1"/>
            <fact.filter.ExponentialSmoothing key="DataCalibrated" outputKey="smoothedData2" alpha="0.2"/>
            <fact.filter.ExponentialSmoothing key="DataCalibrated" outputKey="smoothedData9" alpha="0.9"/>
            <fact.datacorrection.InterpolateTimeline key="DataCalibrated" outputKey="DataCalibrated"/>
            <fact.extraction.MaxAmplitudePosition key="DataCalibrated" searchWindowLeft="25" searchWindowRight="125" outputKey="maxAmplitudePosition"/>
            <fact.extraction.RisingEdgeForPositions dataKey="DataCalibrated"  amplitudePositionsKey="maxAmplitudePosition" outputKey="arrivalTime"/>
            <fact.extraction.PhotonCharge dataKey="DataCalibrated" rangeSearchWindow="25"
                                          url="file:src/main/resources/gain_sorted_20131127.csv" positions="maxAmplitudePosition"
                                          outputKey="photoncharge" color="#FF0F0F"/>

            <fact.cleaning.TwoLevelTimeMedian key="photoncharge" outputKey="shower" corePixelThreshold="5" neighborPixelThreshold="2"
                                             keyPositions="maxAmplitudePosition" timeThreshold="30"  minNumberOfPixel="2"/>

            <fact.features.source.SourcePosition outputKey="Cetatauri" url="${driveFile}" sourceRightAscension="84.41125" sourceDeclination="21.1425" />
            <fact.features.DistributionFromShower weightsKey="photoncharge" showerKey="shower" outputKey="dist" />
            <fact.ShowViewer key="DataCalibrated" range="25,250"/>
            <!--<fact.statistics.ArrayMean key="photoncharge" outputKey="pMean" />-->
            <!--<fact.statistics.ArrayMean key="arrivalTime" outputKey="aMean" />-->
            <!--<fact.plotter.BarPlotter keys="pMean,aMean" />-->
		</process>

</container>

