<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8 at 2019-10-17 
 | Rendered using Apache Maven Fluido Skin 1.6
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20191017" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Fact Tools &#x2013; Example Processes</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.6.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
      <script type="text/javascript" src="./js/apache-maven-fluido-1.6.min.js"></script>
      </head>
    <body class="topBarDisabled">
      <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><a href="http://www.uni-dortmund.de/" id="bannerLeft"><img src="images/logo_tu.png"  alt="tu logo"/></a></div>
        <div class="pull-right"><a href="./" id="bannerRight"><img src="images/header-bg-topLeft.png"  alt="ls8 logo"/></a></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2019-10-17<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.1.3</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
<ul class="nav nav-list">
            <li class="nav-header">General</li>
    <li><a href="index.html" title="Overview"><span class="none"></span>Overview</a>  </li>
    <li><a href="publications.html" title="Publications"><span class="none"></span>Publications</a>  </li>
    <li><a href="viewer.html" title="Fact Viewer"><span class="none"></span>Fact Viewer</a>  </li>
    <li><a href="build.html" title="Building"><span class="none"></span>Building</a>  </li>
          <li class="nav-header">Tutorial</li>
    <li><a href="tutorial/index.html" title="FACT Tools Tutorial"><span class="icon-chevron-right"></span>FACT Tools Tutorial</a>  </li>
          <li class="nav-header">Documentation</li>
    <li><a href="quickstart.html" title="Quickstart"><span class="none"></span>Quickstart</a>  </li>
    <li><a href="multistream.html" title="Using Multistreams"><span class="none"></span>Using Multistreams</a>  </li>
    <li><a href="aux.html" title="Using Auxiliary Data"><span class="none"></span>Using Auxiliary Data</a>  </li>
    <li><a href="stdAnalysis/standardAnalysis.html" title="Standard Analysis"><span class="icon-chevron-down"></span>Standard Analysis</a>
      <ul class="nav nav-list">
    <li><a href="stdAnalysis/standardSettings.html" title="Standard Settings"><span class="none"></span>Standard Settings</a>  </li>
      </ul>
  </li>
    <li class="active"><a href="#"><span class="icon-chevron-down"></span>Usage Examples</a>

      <ul class="nav nav-list">
    <li><a href="example_writing.html" title="Reading and Writing Data"><span class="none"></span>Reading and Writing Data</a>  </li>
    <li><a href="plotting/example_plots.html" title="Plotting Data"><span class="icon-chevron-right"></span>Plotting Data</a>  </li>
      </ul>
  </li>
    <li><a href="programming_examples/programming_example.html" title="Programming Examples"><span class="icon-chevron-right"></span>Programming Examples</a>  </li>
    <li><a href="resources.html" title="Further Resources"><span class="none"></span>Further Resources</a>  </li>
          <li class="nav-header">Download</li>
    <li><a href="download.html" title="Download"><span class="none"></span>Download</a>  </li>
          <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a>  </li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a>  </li>
  </ul>
          <hr />
          <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
  <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
              </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<h1>Example Processes</h1>
<p>This page shows some example processes defined in XML that explain how FACT data can be processed with the <i>fact-tools</i>. Any of these XML snippets can be stored into a file and can be executed by using the FactViewer jar file.</p>
<p>The FactViewer jar file provides a small <tt>stream.run</tt> method that needs to be provided with the XML file to execute:</p>

<div>
<div>
<pre class="source"># java -jar fact-tools-VERSION.jar experiment.xml
</pre></div></div>

<p>As soon as all items of the streams defined in the <tt>experiment.xml</tt> file have been processed, the Java process terminates.</p>
<div class="section">
<div class="section">
<h3><a name="Processing_FACT_Data"></a>Processing FACT Data</h3>
<p>The following snippet shows a simple experiment that reads FACT events from a FITS data file and applies the DRS calibration:</p>

<div>
<div>
<pre class="source"> &lt;container&gt;

    &lt;Stream id=&quot;fact-data&quot; class=&quot;fact.io.FITSStream&quot;
            url=&quot;file:///tmp/fact-data.fits.gz&quot; /&gt;


    &lt;Process input=&quot;fact-data&quot;&gt;
      
        &lt;fact.datacorrection.DrsCalibration url=&quot;file:///tmp/fact.drs.fits.gz&quot;
                                      key=&quot;data&quot; outputKey=&quot;DataCalibrated&quot;/&gt;
    
        &lt;fact.features.MaxAmplitude key=&quot;DataCalibrated&quot; outputKey=&quot;maxAmplitude&quot;/&gt;
        
    &lt;/Process&gt;

 &lt;/container&gt;
</pre></div></div>

<p>The <tt>DrsCalibration</tt> class implements the DRS chip calibration based on data obtained from previous pedestal runs. This data is read from <tt>fact.drs.fits.gz</tt>. Afer this calibration step, the keys <tt>Data</tt> and <tt>DataCalibrated</tt> are available in the data item.</p>
<p>The <tt>MaxAmplitude</tt> processor is applied to the key <tt>DataCalibrated</tt> as specified by the parameter in the <tt>experiment.xml</tt>. It computes a double array of 1440 double values over the time slices of each pixel and stores this array as <tt>maxAmplitude</tt>.</p></div></div>
<div class="section">
<h2><a name="Event_Data_Items"></a>Event Data Items</h2>
<p>As outlined above, each FACT event basically consists of an 1440 by 300 matrix of float values stored as key <tt>Data</tt>. This basically represents a sequence of float array of length 300 for each pixel. The order of this sequence is in <i>continuous hardware ID</i>, called <i>chid</i>.</p>
<p>Most of the processors provided by the fact-tools library do use this 1440x300 matrix as input for computing further results.</p></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2019.
All rights reserved.</p>
        </div>
        </div>
    </footer>
    </body>
</html>
