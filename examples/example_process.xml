<container>

<!-- Pfade zu den fits files. -->
 <!--<property name="data" value="/home/bruegge/FactTest/20120209_061.fits" />-->
 <!--<property name="dataDRS" value="/home/bruegge/FactTest/20120209_050.drs.fits" />-->
 <!--<property name="drive_file" value="/home/bruegge/FactTest/drive_file.fits" />-->
<!-- <property name="sample" value="/home/bruegge/FactTest/sample.fits.gz" /> -->
<!--<property name="sampleDRS" value="/home/bruegge/FactTest/test.drs.fits.gz" />-->
<!--<property name="outfile" value="/home/bruegge/FactTest/output.csv" />-->
<!-- <property name="data" value="/Users/kaibrugge/FactTest/jafs_mc.fits.gz" /> -->
<!-- <property name="dataDRS" value="/Users/kaibrugge/FactTest/jafs_mc.drs.fits.gz" /> -->

<property name="data" value="/Users/kaibrugge/FactTest/20130104_095.fits" />
<property name="dataDRS" value="/Users/kaibrugge/FactTest/20130104_076.drs.fits" />
<property name="drive_file" value="/Users/kaibrugge/FactTest/20130104.DRIVE_CONTROL_TRACKING_POSITION.fits" />
 <property name="outfile" value="/Users/kaibrugge/FactTest/test.txt" />

	<!-- Name des Streams und pfad zu dem Daten-File -->
	<stream id="fact" class="fact.io.FitsStream"  url="file:${data}"  />
	
	<!-- Beschreibung des zu bearbeitenden Prozesses und zu welchem Stream dfieser gehÃ¶rt -->
	<process input="fact" copies="1">
		<Skip condition="%{data.TriggerType} != 4" />
	        <fact.filter.DrsCalibration url="file:${dataDRS}"  outputKey="DataCalibrated" />
            <!--<fact.filter.AverageJumpRemoval key="DataCalibrated" outputKey="JumpRemoved" color="#FD0404"/>-->


	        <stream.flow.Skip condition="%{data.TriggerType} != 4" />
            <fact.datacorrection.InterpolateBadPixel key="DataCalibrated"  outputKey="DataCalibrated" />
            <fact.features.source.SourcePosition url="file:${drive_file}" outputKey="sourcePosition" physicalSource="crab"/>
        <fact.extraction.MaxAmplitudePosition key="DataCalibrated" outputKey="maxAmplitudePosition" searchWindowLeft="25" searchWindowRight="125"/>
        <fact.extraction.PhotonCharge dataKey="DataCalibrated" rangeSearchWindow="25"
                                          url="file:src/main/resources/gain_sorted_20131127.csv" positions="maxAmplitudePosition"
                                          outputKey="photoncharge"/>

        <fact.cleaning.CoreNeighborClean key="photoncharge" outputKey="shower" corePixelThreshold="5" neighborPixelThreshold="2"
                                         keyPositions="maxAmplitudePosition" timeThreshold="30"  minNumberOfPixel="2"/>

        <fact.features.DistributionFromShower weights="photoncharge" pixel="shower" outputKey="dist" />
        <stream.flow.Skip condition="%{data.EventNum} &lt; 55" />
        <stream.flow.Skip condition="%{data.shower} == null" />
        <fact.ShowViewer key="DataCalibrated" range="25,250"/>

<!-- 			<fact.plotter.ScatterPlotter xValue="showerPositionMean" yValue="showerPhotonChargeMean" logAxis="false" /> -->
<!-- 			<fact.plotter.HistogramPlotter key="showerPositionMean" binWidth="1" logAxis="false" /> -->
<!-- 			<fact.plotter.BarPlotter keys="posMean,showerPositionMean" /> -->
<!-- 			<fact.plotter.CameraPlotter key="risingedge" /> -->
<!-- 			<fact.plotter.CameraPlotter key="photoncharge" /> -->

	</process>
		
		
		
</container>

