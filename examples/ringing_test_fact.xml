<container>
    <property name="fhgfs" 		value="/net/home.e5.physik.tu-dortmund.de/vol/ph_e5v/e5b/homes/jbuss/e5/fhgfs" />
    <property name="infile" value="${fhgfs}/groups/app/fact/raw/2013/10/02/20131002_089.fits.gz" />
    <property name="drsfile" value="${fhgfs}/groups/app/fact/raw/2013/10/02/20131002_112.drs.fits.gz" />
    <property name="drstimefile" value="${fhgfs}/groups/app/fact/raw/2013/10/02/20131002_114.drs.time.fits" />
    <property name="outfile" value="/net/home.e5.physik.tu-dortmund.de/vol/ph_e5v/e5b/homes/jbuss/testoutfile.json" />

    <!-- Name des Streams und pfad zu dem Daten-File -->
    <stream id="fact" class="fact.io.FitsStream"  url="file:${infile}"/>

    <property name="skipFirst" value="35" />
    <property name="skipLast"  value="100" />
    <property name="searchWindowSize"  value="100" />


    <!-- Beschreibung des zu bearbeitenden Prozesses und zu welchem Stream dieser gehÃ¶rt -->
    <process id="2" input="fact">
        <fact.utils.PreviousEventInfo startCellKey="StartCellData" outputKey="prevEvents" limitEvents="20"/>
        <stream.flow.Skip condition="%{data.TriggerType} != 1024" />

        <fact.filter.DrsCalibration url="file:${drsfile}"
                                    key="Data"
                                    outputKey="DataCalibrated" />

        <fact.datacorrection.PatchJumpRemoval dataKey="DataCalibrated"
                                              outputKey="DataCalibrated"
                                              prevEventsKey="prevEvents"
                                              startCellKey="StartCellData"
                                              jumpLimit="2.0" />

        <fact.datacorrection.RemoveSpikes dataKey="DataCalibrated"
                                          outputKey="DataCalibrated"
                                          startCellKey="StartCellData"
                                          leftBorder="6"
                                          spikeLimit="20"
                                          topSlopeLimit="16"
                                          maxSpikeLength="4"/>

        <fact.filter.DrsTimeCalibration url="file:${drstimefile}"
                                        drsTimeKey="SamplingTimeDeviation"
                                        outputKey="timeCalibConst"/>

        <fact.filter.ArrayTimeCorrection dataKey="DataCalibrated"
                                         timeCalibConstKey="timeCalibConst"
                                         outputKey="DataCalibrated" />

        <fact.datacorrection.InterpolateBadPixel key="DataCalibrated"  outputKey="DataCalibrated"
                                                 badChidIds="863,868,297,927,80,873,1093,1094,527,528,721,722" />

       <fact.statistics.FastFourierTrafo key="DataCalibrated"
                                         lengthForFFT="1024" 
                                         outputKey="fft" 
                                         searchWindowLeft="10" 
                                         searchWindowRight="1013"/>

       <fact.extraction.RingingInSearchWindow key="fft"   
                                              outputKey="ringing"        
                                              searchWindowLeft="30" 
                                              searchWindowRight="50"/>



        <!--<fact.SelectArrayByChid key="ringing" chid="120" outputKey="ringing_120"/>-->
        <fact.utils.SelectDataArrayByChid key="DataCalibrated" chid="120" outputKey="DataCalibrated_120"/>
        <fact.plotter.HistogramArrayPlotter key="DataCalibrated_120" />

        <fact.utils.SelectDataArrayByChid key="fft" chid="120" outputKey="fft_120"/>
        <fact.plotter.HistogramArrayPlotter key="fft_120" binWidth="0.001" logAxis="True"/>
        <!--<fact.ShowViewer key="DataCalibrated"/>-->

        <PrintData/>
       <!--<fact.io.RootASCIIWriter keys="EventNum,ringing,spikelessData,fft" url="file:/home/localhost/schennetten_fact-tools/ringing.txt"/>-->

    </process>

 </container>
