<container>

    <!-- Pathes to the input files -->
    <property name="infile" value="src/test/resources/testDataFile.fits.gz" />
	<property name="drsfile" value="src/test/resources/testDrsFile.drs.fits.gz" />
	<property name="drivefile" value="src/test/resources/testDriveFile.fits" />
	<property name="drstimefile" value="src/test/resources/testDrsTimeFile.drs.time.fits" />

    <property name="integralGainFile" value="src/main/resources/gain_sorted_20131127.csv" />
    <property name="pixelDelayFile" value="src/main/resources/delays_20141114.csv" />
	
    <property name="sourcename" value="crab" />
    <property name="core_threshold" value="7.0" />
    <property name="neighbor_threshold" value="4.5"/>
    <property name="time_limit" value="10.0" />
    <property name="min_number_of_pixel" value="2" />
    <property name="start_search_window" value="35" />
    <property name="range_search_window" value="60" />


    <!-- Name of the stream and url to the input file -->
    <stream id="fact" class="fact.io.FitsStream"  url="file:${infile}"/>

    <!-- Description of the process and the corresponding stream -->
    <process id="2" input="fact">
        <fact.utils.PreviousEventInfo 
        	startCellKey="StartCellData"
        	outputKey="prevEvents"
        	limitEvents="10"
        />
        <!-- <stream.flow.Skip condition="%{data.EventNum} &lt; 0" /> -->
        <!-- <stream.flow.Skip condition="%{data.TriggerType} != 1024" /> -->
        
        <include file="examples/stdAnalysis/data/calibration.xml" />
        
        <fact.triggerAnalysis.PatchDataArray dataKey="DataCalibrated" outputKey="PatchData" />
        
        <fact.filter.ShapeSignal key="PatchData" shift="10" factor="0.96" outputKey="PatchData_shaped"/>
        <!-- <fact.filter.ShapeSignal key="PatchData_viewer" shift="10" factor="0.96" outputKey="PatchData_viewer_shaped"/> -->
        
        <fact.triggerAnalysis.TriggerSignal triggerDataKey="PatchData_shaped" outputKey="t21"
        	threshold="129" searchWindowStart="30" searchWindowRange="100" numberPixelPerPatch="9" />
        <fact.triggerAnalysis.TriggerSignal triggerDataKey="PatchData_shaped" outputKey="t23"
        	threshold="149" searchWindowStart="30" searchWindowRange="100" numberPixelPerPatch="9" />
        <fact.triggerAnalysis.TriggerSignal triggerDataKey="PatchData_shaped" outputKey="t25"
        	threshold="169" searchWindowStart="30" searchWindowRange="100" numberPixelPerPatch="9" />
        <fact.triggerAnalysis.TriggerSignal triggerDataKey="PatchData_shaped" outputKey="t27"
        	threshold="189" searchWindowStart="30" searchWindowRange="100" numberPixelPerPatch="9" />
        <fact.triggerAnalysis.TriggerSignal triggerDataKey="PatchData_shaped" outputKey="t29"
        	threshold="209" searchWindowStart="30" searchWindowRange="100" numberPixelPerPatch="9" />
        <fact.triggerAnalysis.TriggerSignal triggerDataKey="PatchData_shaped" outputKey="t31"
        	threshold="229" searchWindowStart="30" searchWindowRange="100" numberPixelPerPatch="9" />
        <fact.triggerAnalysis.TriggerSignal triggerDataKey="PatchData_shaped" outputKey="t33"
        	threshold="249" searchWindowStart="30" searchWindowRange="100" numberPixelPerPatch="9" />
        
        
        <!-- <Skip condition="%{data.shower} == null" /> -->
            
        <fact.ShowViewer key="DataCalibrated"/>


    </process>


</container>
