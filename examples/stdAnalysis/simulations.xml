<container>
  <properties url="classpath:/default/settings.properties" />

  <property name="infile" value="file:src/main/resources/testMcFile.fits.gz" />
  <property name="drsfile" value="file:src/main/resources/testMcDrsFile.drs.fits.gz" />
  <property name="auxFolder" value="file:src/main/resources/aux/" />

  <property name="integralGainFile" value="classpath:/default/defaultIntegralGains.csv" />
  <property name="pixelDelayFile" value="classpath:/default/delays_zero.csv" />

  <property name="outfile" value="file:test.fits" />

  <service id="auxService" class="fact.auxservice.AuxFileService" auxFolder="${auxFolder}" />
  <service id="calibService" class="fact.calibrationservice.ConstantCalibService" />

  <stream id="fact" class="fact.io.hdureader.FITSStream" url="${infile}"/>

  <process id="2" input="fact">
      <If condition="%{data.CREATOR}!='Ceres'">
        <fact.utils.PreviousEventInfo
          startCellKey="StartCellData"
          outputKey="prevEvents"
          limitEvents="${PreviousEventInfo.limitEvents}"
        />
        <fact.features.UnixTimeUTC2DateTime />
      </If>
      <fact.extraction.SaturatedSlicesPercentage />
      <Skip condition="%{data.saturated_slices_percentage} &gt; 0.2" />
      <stream.flow.Skip condition="%{data.TriggerType} != 4" />

      <include url="classpath:/analysis/calibration.xml" />
      <include url="classpath:/analysis/extraction.xml" />
      <include url="classpath:/analysis/cleaning.xml" />
      <include url="classpath:/analysis/pedestalParameters.xml" />
      <include url="classpath:/analysis/imageParameters.xml" />
      <include url="classpath:/analysis/sourcePosition.xml" />

      <fact.utils.SanitizeKeys />
      <fact.io.FITSWriter url="${outfile}" keys="${outputKeysSimulations}"/>
  </process>
</container>
