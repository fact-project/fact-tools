<container>

<property name="data" value="/Users/kaibrugge/FactTest/20120229_144.fits.gz" />
<property name="dataDRS" value="/Users/kaibrugge/FactTest/20120229_132.drs.fits" />
<property name="drive_file" value="/Users/kaibrugge/FactTest/20120229_144.DRIVE_CONTROL_TRACKING_POSITION.fits" />
<property name="dataCeres" value="/Users/kaibrugge/FactTest/ceres.fits" />
<property name="csv" value="/Users/kaibrugge/FactTest/output.bin" />


<stream id="fact" class="fact.io.FitsStream" url="file:${data}" />
    <process input="fact">

        <fact.filter.DrsCalibration url="file:${dataDRS}" key="data"  outputKey="DataCalibrated"/>
        <fact.utils.CutSlices  start="22" end="220"/>
        <fact.filter.InterpolateBadPixel key="DataCalibrated"  outputKey="DataCalibrated"
            badChidIds="863,868,297,927,80,873,1093,1094,527,528,721,722" />
        <fact.filter.RemoveSpikesMars key="DataCalibrated" outputKey="DataCalibrated" />
        <fact.filter.AverageJumpRemoval key="DataCalibrated" outputKey="removed" />

        <stream.monitor.DataRate every="100" />

        <stream.flow.Skip condition="%{data.TriggerType} != 1024" />
            <fact.io.BinaryFactWriter keys="removed,DataCalibrated" url="file:${csv}" />
	</process>
</container>
