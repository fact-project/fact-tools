<container>

    <properties url="classpath:/default/settings_mc.properties" />


    <!-- Pathes to the input files -->

    <property name="infolder" value="file:/home/lena/Dokumente/Masterarbeit/FACT_Data/TrainingsSet/Proton/" />
    <property name="outfolder" value="file:/home/lena/Dokumente/Masterarbeit/sklearn/" />
    <property name="filename" value="proton_test_1000" />
    <property name="stdParamShower" value="numPixelInShower,Size,Length,Width,numIslands,Delta,COGx,COGy,m3l,m3t,M3Long,M3Trans,M4Long,M4Trans,Disp,Concentration_onePixel,Concentration_twoPixel,ConcCore,concCOG,Leakage,Leakage2,Slope_long,Slope_trans,Slope_spread,Slope_spread_weighted,Timespread,Timespread_weighted,timeGradientSlope,timeGradientSlope_err,timeGradientIntercept,timeGradientIntercept_err,timeGradientSSE,Theta,Alpha,Distance,CosDeltaAlpha" />
    <property name="fellwalkerParam" value="numCluster,boundRatio,idealBoundDiff,boundAngleSum,distanceCenterSum,neighborCluster,chargeMax,maxClusterNumPixel,numClusterPixel,stdNumPixel,convexity" />

    <property name="label" value="0" />



    <property name="integralGainFile" value="classpath:/default/defaultIntegralGains.csv" />
    <property name="drsfile" value="classpath:/testMcDrsFile.drs.fits.gz" />


    <service id="auxService" class="fact.auxservice.AuxFileService" auxFolder="file:src/main/resources/aux/" />

    <service id="calibService" class="fact.calibrationservice.ConstantCalibService" />


    <stream id="fact" class="fact.io.RecursiveDirectoryStream"
            pattern="*_Events.fits.gz"  url="${infolder}" limit="100000">
        <stream class="fact.io.FitsStream" id="_" />
    </stream>

    <process id="2" input="fact" >

        <include url="classpath:/default/mc/calibration_mc.xml" />

       <include url="classpath:/default/mc/extraction_mc.xml" />


        <fact.cleaning.MotionCleaning
                numPixelKey = "numPixelInShower"
                threshold = "30"
                outputKey = "shower"/>

        <Skip condition="%{data.numPixelInShower} &lt; 15 "/>

        <include url="classpath:/default/mc/parameterCalc_mc.xml" />

                <fact.hexmap.ClusterFellwalker
                        pixelSetKey="shower"
                        arrivaltimePosKey="arrivalTimePos"
                        minShowerpixel="2"
                        label="${label}"
                />

                <Skip condition="%{data.numCluster} == 0" />


        <include url="classpath:/default/mc/sourceParameter_mc.xml" />

        <!-- <fact.io.PrintKeysOnConsole keys="${keysForOutput}" />-->
       <!-- <fact.ShowViewer key="DataCalibrated"/>-->

        <!--<fact.io.JSONWriter keys="${stdParamShower},${fellwalkerParam},label" url="${outfolder}${filename}.json"/>-->

    </process>

</container>
