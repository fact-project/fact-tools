<container>

    <properties url="classpath:/default/settings.properties" />

    <property name="infile" value="file:src/main/resources/testDataFile.fits.gz" />
    <property name="drsfile" value="file:src/main/resources/testDrsFile.drs.fits.gz" />

    <property name="integralGainFile" value="classpath:/default/gain_sorted_20131127.csv" />
    <property name="pixelDelayFile" value="classpath:/default/delays_lightpulser_20150217.csv" />

    <property name="outfile" value="file:/home/fabian/testoutfile.txt" />

    <property name="auxFolder" value="file:src/main/resources/aux/" />
    <service id="auxService" class="fact.auxservice.AuxFileService" auxFolder="${auxFolder}" />

    <service id="calibService" class="fact.calibrationservice.ConstantCalibService" />

    <!--In case you want to analyze .zfits files.-->
    <!-- <stream id="fact" class="fact.io.hdureader.FITSStream"  url="${infile}"/> -->

    <stream id="fact" class="fact.io.hdureader.FITSStream" url="${infile}"/>

    <process id="2" input="fact">
        <If condition="%{data.CREATOR}!='Ceres'">
            <fact.utils.PreviousEventInfo
                startCellKey="StartCellData"
                outputKey="prevEvents"
                limitEvents="${PreviousEventInfo.limitEvents}"
            />
            <fact.features.UnixTimeUTC2DateTime />
        </If>
        <fact.extraction.SaturatedSlicesPercentage />
        <Skip condition="%{data.saturated_slices_percentage} &gt; 0.2" />
        <stream.flow.Skip condition="%{data.TriggerType} != 4" />

        <include url="classpath:/analysis/calibration.xml" />
        <include url="classpath:/analysis/extraction.xml" />
        <include url="classpath:/analysis/cleaning.xml" />
        <include url="classpath:/analysis/pedestalParameters.xml" />
        <include url="classpath:/analysis/imageParameters.xml" />
        <include url="classpath:/analysis/sourcePosition.xml" />

        <fact.ApplyModel url="file:/home/kai/Development/erna/test.pmml" />
    </process>
</container>
