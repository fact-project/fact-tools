<container>

    <!-- Pfade zu den fits files. -->
    <property name="infile" value="/home/fabian/mount/Phido/fhgfs_app/fact/raw/2013/01/02/20130102_060.fits.gz" />
    <property name="drsfile" value="/home/fabian/mount/Phido/fhgfs_app/fact/raw/2013/01/02/20130102_056.drs.fits.gz" />
    <!-- <property name="infile" value="/home/fabian/mount/Phido/fhgfs_app/fact/simulated/ceres_2_0/gamma_gustav_4_psf_3_0/12909/00000003.909_D_MonteCarlo012_Events.fits.gz" />
    <property name="drsfile" value="/home/fabian/mount/Phido/fhgfs_app/fact/simulated/drsfiles/12bitADC/offsetMinus1850/test300samples.drs.fits" /> -->
    <property name="outfile" value="/home/fabian/spikeTestMC.csv" />


    <!-- Name des Streams und pfad zu dem Daten-File -->
    <!-- <stream id="fact" class="fact.io.FitsStream"  url="file:${infile}" limit="100"/> -->
    
    <stream id="fact" class="fact.io.FitsStream"  url="file:${infile}"/>

    <!-- Beschreibung des zu bearbeitenden Prozesses und zu welchem Stream fieser gehÃ¶rt -->
    <process id="2" input="fact">
<!--     	<fact.utils.Remapping key="Data" outputKey="Data"/>
    	<fact.utils.CreateFakeStartCells outputKey="StartCellData" />
    	<fact.utils.CreateFakeTime outputKey="UnixTimeUTC" /> -->
    	<fact.utils.PreviousEventInfo startCellKey="StartCellData" outputKey="prevEvents" limitEvents="5"/>
        <stream.flow.Skip condition="%{data.EventNum} &lt; 0" />
        <stream.flow.Skip condition="%{data.TriggerType} != 4" />
        <fact.filter.DrsCalibration url="file:${drsfile}" key="Data"  outputKey="DataCalibrated" color="#000000"/>
        <fact.datacorrection.PatchJumpRemoval dataKey="DataCalibrated" outputKey="DataCalibrated" color="#000000" outputJumpsKey="j" prevEventsKey="prevEvents" startCellKey="StartCellData" jumpLimit="2.0" />
        
        <fact.datacorrection.RemoveSpikes dataKey="DataCalibrated" outputKey="SpikesRemoved" color="#E6172F" startCellKey="StartCellData" leftBorder="6" spikeLimit="20" topSlopeLimit="16" maxSpikeLength="5" outputSpikesKey="Sp"/>
        
        <!-- <fact.io.RootASCIIWriter url="file:${outfile}" keys="EventNum,UnixTimeUTC,SpsingleLen,SpsPixel,SpsSlices,SpsHeights,SpdoubleLen,SpdPixel,SpdSlices,SpdHeights,SpdTopSlope"/> -->
        <!-- <fact.io.PrintKeysOnConsole keys="SpN1,SpN2,SpN3,SpN4,SpN5" /> -->
        <If condition="%{data.SpN3} &gt; 0" >
        	<fact.image.ShowImage/>
        </If>
        <If condition="%{data.SpN4} &gt; 0" >
        	<fact.image.ShowImage/>
        </If>
        <If condition="%{data.SpN5} &gt; 0" >
        	<fact.image.ShowImage/>
        </If>


    </process>


</container>
