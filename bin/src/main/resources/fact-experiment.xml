<container>
<!-- 
    <Stream id="fact-data" class="fact.io.FactDataStream" limit="4"
    		drsFile="20120120_071.drs.fits"
            url="file:20120120_071.fits" />
 -->


    <Stream id="fact-data" class="fact.io.FactDataStream" limit="1000"
    		drsFile="/Users/chris/Downloads/20111126_034.drs.fits"
            url="file:/Users/chris/Downloads/20111126_042.fits" />

    <Process input="fact-data">
    
    	<Skip condition="%{data.EventNum} @lt 0" />
        <!-- 
        <stream.logger.Message message="%{data.@id}, TriggerType: %{data.TriggerType}, @id: %{data.@id}" />
        <fact.image.SliceSmoothing />
		-->
		<stream.logger.Message message="%{data.@id}, EventNum: %{data.EventNum}" />

        <fact.data.CutSlices keys="Data,DataCalibrated" start="20" end="200" />
        <!-- 
         -->
         
        <fact.image.SliceInterpolation keys="Data,DataCalibrated" deviations="0.80" />
         
 		<fact.image.DetectCorePixel k="15" keys="DataCalibrated" name="@default"/>
 		<fact.image.DetectCorePixel k="5" keys="DataCalibrated" name="@first5"/>
 		<fact.image.DetectCorePixel k="3" keys="DataCalibrated" name="@first3"/>
 		<fact.image.DetectCorePixel k="1" keys="DataCalibrated" name="@first1"/>
 		<!-- 
 		 -->
		<fact.data.SliceNormalization keys="Data,DataCalibrated" />
		<RemoveKeys keys="Data" />

		<fact.image.AddAnnotations file="/Users/chris/event-pixel-labels.json" />
<!-- 
		<fact.image.PixelPrediction classifier="pixelPredictor" />
 -->

<!-- 
        <fact.image.ClusterImage key="DataCalibrated" k="4" starts="4" rounds="5"/>
 --> 
        <fact.image.ShowImage />
<!-- 
        <stream.io.JSONWriter keys="@id,@shower" url="file:/tmp/labels.json" condition="%{data.@shower} != null"/>
        
        <If condition="%{data.@shower} != null">
        	
        	<fact.image.PixelClassifier id="pixelPredictor" />
        
        </If>
 -->        
<!--
        <PrintData/>
	<fact.io.BinaryFactWriter file="/Volumes/RamDisk/fact-events.dat" key="Data" />
  -->
    </Process>

 </container>
