<module>
<fact.cleaning.TwoLevelTimeNeighbor
    photonChargeKey="pC_Basic"
    outputKey="shower"
    arrivalTimeKey="aT_Basic" 
    corePixelThreshold="6"
    neighborPixelThreshold="3"
    timeThreshold="15"
    minNumberOfPixel="2"
    starPositionKeys="Cetatauri"
    starRadiusInCamera="11.0"
    showDifferentCleaningSets="false"
/>
   
<Skip condition="%{data.shower} == null" />

<fact.features.NumberOfPixelInShower 
    showerKey="shower"
    outputKey="numPixelInShower"
/>
    
<Skip condition="%{data.numPixelInShower} &lt; 3" />
<fact.features.Size
    showerKey="shower"
    photonChargeKey="pC_Basic"
    outputKey="Size"
/>
<fact.features.DistributionFromShower
    weightsKey="pC_Basic"
    showerKey="shower"
    sizeKey="Size"
    outputKey="showerDistribution"
/>
<fact.features.TimeGradient
    showerKey="shower"
    arrivalTimeKey="aT_Basic"
    cogxKey="COGx"
    cogyKey="COGy"
    deltaKey="Delta"
    outputKeySlope="timeGradientSlope"
    outputKeyIntercept="timeGradientIntercept"
    outputKeySumSquaredErrors="timeGradientSSE"
/>
<fact.extraction.TimeGradientExtraction
    dataKey="DataCalibrated" 
    outputKeyMaxAmplPos="maxPos_TG"
    outputKeyPhotonCharge="pC_TG" 
    url="file:${integralGainFile}"
    rangeSearchWindow="30"
    rangeHalfHeightWindow="25"
    deltaKey="Delta"
    cogxKey="COGx"
    cogyKey="COGy"
    timeGradientSlopeKey="timeGradientSlope"
    timeGradientInterceptKey="timeGradientIntercept"
/>
<fact.extraction.RisingEdgeForPositions
    dataKey="DataCalibrated"
    amplitudePositionsKey="maxPos_TG"
    outputKey="arrivalTimePos"
    maxSlopesKey="maxSlopesPos"
/>
<fact.extraction.RisingEdgePolynomFit
    dataKey="DataCalibrated"
    risingEdgeKey="arrivalTimePos"
    outputKey="aT_TG"
    numberOfPoints="11"
    maxSlopesKey="mS_TG"
/>
<fact.extraction.TimeOverThreshold
    dataKey="DataCalibrated"
    outputKey="timeOverThreshold"
    firstSliceOverThresholdOutputKey="arrivalTimeTOT"
    positionsKey="maxPos_TG"
    threshold="1500" 
    thresholdOutputKey="thresholdForToT"
/>
<fact.extraction.PhotonChargeTimeOverThreshold
    timeOverThresholdKey="timeOverThreshold"
    thresholdKey="thresholdForToT"
    outputKey="photonchargeSaturated"
/>
<fact.extraction.HandleSaturation
    photonChargeKey="pC_TG"
    photonChargeSaturatedKey="photonchargeSaturated"
    arrivalTimeKey="aT_TG"
    arrivalTimeSaturatedKey="arrivalTimeTOT" 
    limitForSaturatedPixel="150" 
    outputKeyPhotonCharge="pC_TG" 
    outputKeyArrivalTime="aT_TG" 
    saturatedPixelKey="saturatedPixel" 
/>
<fact.datacorrection.CorrectPixelDelays
    arrivalTimeKey="aT_TG"
    outputKey="aT_TG"
    url="file:${pixelDelayFile}"
/>
</module>